configurations {
   tika { transitive = false } // we don't want all of the jars that tika depends on to be copied, #30592
}

ext.luceneVersion="7.2.0"

dependencies {
   external "org.apache.lucene:lucene-analyzers-common:${luceneVersion}"
   external "org.apache.lucene:lucene-core:${luceneVersion}"
   external "org.apache.lucene:lucene-queryparser:${luceneVersion}"
   external "org.apache.lucene:lucene-backward-codecs:${luceneVersion}"
   tika "org.apache.tika:tika-app:${tikaVersion}"
}

project.task("copyTika",
        type: Copy,
        group: "Build",
        description: "Copy Tika app into directory for use by special classloader",
        { CopySpec copy ->
           copy.from project.configurations.tika
           copy.into new File(project.buildDir, "explodedModule/tika")
        }
)

project.tasks.module.dependsOn(project.tasks.copyTika)