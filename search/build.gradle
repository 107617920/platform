configurations {
   tika { transitive = false } // we don't want all of the jars that tika depends on to be copied, #30592
}

dependencies {
   external 'org.apache.lucene:lucene-analyzers-common:6.4.1'
   external 'org.apache.lucene:lucene-core:6.4.1'
   external 'org.apache.lucene:lucene-queryparser:6.4.1'
   external 'org.apache.lucene:lucene-backward-codecs:6.4.1'
   tika "org.apache.tika:tika-app:${tikaVersion}"
}

project.task("copyTika",
        type: Copy,
        group: "Build",
        description: "Copy Tika app into directory for use by special classloader",
        { CopySpec copy ->
           copy.from project.configurations.tika
           copy.into new File(project.buildDir, "explodedModule/tika")
        }
)

project.tasks.module.dependsOn(project.tasks.copyTika)