<html>
<head>
    <link rel="stylesheet" href="../core/stylesheet.view" />
</head>
<script type="text/javascript" src="columnPicker.js"></script>
<script type="text/javascript" src="../designer/designer.js"></script>
<script type="text/javascript" src="queryDesigner.js"></script>
<script type="text/javascript">
    var rootTable = {key:null,label:'null',fields:['RowId'
,'Flag'
,'Name'
,'FilePathRoot'
,'ProtocolStep'
,'AnalysisScript'
,'CompensationMatrix'
,'WellCount'
,'Created'],children:['Flag'
,'AnalysisScript'
,'CompensationMatrix']};
    var tables = {};
    var fields = {};
    var contextPath = '';

    fields['RowId'] =
{
label:'Row Id',
table:null,
key:'RowId',
caption:'Row Id',
allColumns:false,
unselectable:false};

    fields['Flag'] =
{
label:'Flag',
table:null,
key:'Flag',
caption:'Flag',
allColumns:false,
unselectable:false};

    fields['Name'] =
{
label:'Name',
table:null,
key:'Name',
caption:'Name',
allColumns:false,
unselectable:false};

    fields['FilePathRoot'] =
{
label:'File Path Root',
table:null,
key:'FilePathRoot',
caption:'File Path Root',
allColumns:false,
unselectable:false};

    fields['ProtocolStep'] =
{
label:'Protocol Step',
table:null,
key:'ProtocolStep',
caption:'Protocol Step',
allColumns:false,
unselectable:false};

    fields['AnalysisScript'] =
{
label:'Analysis Script',
table:null,
key:'AnalysisScript',
caption:'Analysis Script',
allColumns:false,
unselectable:false};

    fields['CompensationMatrix'] =
{
label:'Compensation Matrix',
table:null,
key:'CompensationMatrix',
caption:'Compensation Matrix',
allColumns:false,
unselectable:false};

    fields['WellCount'] =
{
label:'Well Count',
table:null,
key:'WellCount',
caption:'Well Count',
allColumns:false,
unselectable:false};

    fields['Created'] =
{
label:'Created',
table:null,
key:'Created',
caption:'Created',
allColumns:false,
unselectable:false};

    var tableInfoService = new TableInfoService("home/tableInfo.view?schemaName=flow&queryName=Runs");
            tableInfoService.fields = fields;
    var contextPath = '/cpas';
    function init()
    {
        window.designer = new QueryDesigner('checkSyntax.view?', tableInfoService);
        window.designer.updateDocument = function()
        {
            document.getElementById("docText").value = XMLUtil.serializeXML(this.designDoc);
        }
        var xmlhttp;
        if (window.XMLHttpRequest)
            xmlhttp = new XMLHttpRequest();
        else if (window.ActiveXObject)
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        xmlhttp.open("GET", 'demo.xml', false);
        xmlhttp.send(null);
        window.designer.setDesignDocument(xmlhttp.responseXML);
        document.getElementById("rootTable").innerHTML = window.designer.columnPicker.strTable(rootTable, 0);
    }
</script>

<body onload="init()">
<table class="normal"><tr>
    <th><b>Available Fields</b></th>
    <th></th>
    <th colspan="3" align="left">
        <table>
            <tr>
                <td style="cursor:default" class="ms-tabinactive" id="columns.tab" onclick="designer.setActiveTab(designer.tabs.columns)">
                    Fields in Grid
                </td>
                <td style="cursor:default" id="filter.tab" class="ms-tabinactive" onclick="designer.setActiveTab(designer.tabs.filter)">
                    Filter
                </td>
                <td style="cursor:default" id="sort.tab" class="ms-tabinactive" onclick="designer.setActiveTab(designer.tabs.sort)">
                    Sort
                </td>
            </tr>
        </table>
    </th>
</tr>
<td valign="top" style="border:solid 1px black;" id="rootTable" onSelectStart="return false;" onMouseDown="return false;">
</td>
<td>
    <br>
    <br>
    <br>

    <p><a href="javascript:designer.add()" id="addButton"><img src="../Add%20%3E%3E.button" alt="Add >>" border="0"></a></p>
</td>

<td id="columns.list" width="200px" valign="top" style="display:none">
</td>
<td valign="top" id="columns.controls" style="display:none">
    <br>

    <p><a href="javascript:designer.moveUp()"><img src="moveup.gif"
                                                   alt="Move Up" border="0"></a></p>

    <p><a href="javascript:designer.moveDown()"><img src="movedown.gif"
                                                     alt="Move Down" border="0"></a></p>
    <p><a href="javascript:designer.remove()"><img src="delete.gif" alt="Delete" border="0"></a></p>
</td>

<td id="columns.properties" valign="top" style="display:none"></td>
<td id="filter.list" width="400px" valign="top" colspan="2" style="display:none">

</td>
<td id="filter.controls" valign="top" style="display:none">
    <br>

    <p><a href="javascript:designer.tabs.filter.moveUp()"><img src="moveup.gif"
                                                   alt="Move Up" border="0"></a></p>

    <p><a href="javascript:designer.tabs.filter.moveDown()"><img src="movedown.gif"
                                                     alt="Move Down" border="0"></a></p>
    <p><a href="javascript:designer.tabs.filter.remove()"><img src="delete.gif" alt="Delete" border="0"></a></p>
</td>
<td id="sort.list" width="400px" valign="top" colspan="2" style="display:none">

</td>
<td id="sort.controls" valign="top" style="display:none">
    <br>

    <p><a href="javascript:designer.tabs.sort.moveUp()"><img src="moveup.gif"
                                                   alt="Move Up" border="0"></a></p>

    <p><a href="javascript:designer.tabs.sort.moveDown()"><img src="movedown.gif"
                                                     alt="Move Down" border="0"></a></p>
    <p><a href="javascript:designer.tabs.sort.remove()"><img src="delete.gif" alt="Delete" border="0"></a></p>
</td>
<td id="sql.editor" valign="top" colspan="3" style="display:none">
    <table>
        <tr><th id="sql.editor.title"></th></tr>
        <tr><td id="sql.editor.errors"></td></tr>
        <tr><td><textarea id="sql.editor.value" cols="40" rows="20"></textarea></tr>
        <tr><td>
            <a href="javascript:designer.tabs.sql.save()">
            <img src="../OK.button" alt="OK" border="0"></a>
            <a href="javascript:designer.tabs.sql.cancel()">
            <img src="../Cancel.button" alt="Cancel" border="0">
            </a>
            </tr>
    </table>
</td>

</table>
<textarea id="docText" rows="10" cols="60">

</textarea>
</body>
</html>